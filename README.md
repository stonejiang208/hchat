# 前后端通讯协议 

## 创建帐号

### 请求
| # | 字段         | 类型        | /  | 描述               |
|---|--------------|-------------|----|--------------------|
|   | openid       | string      | 必 | 开放id             |
|   | openid_type_ | string      | 必 | 开放id的类型       |
|---|--------------|-------------|----|--------------------|
|   | info         | json_string | 选 | 以json格式的字符串 |
|   |              |             |    |                    |

### 应答
| # | 字段 | 类型        | /  | 描述               |
|---|------|-------------|----|--------------------|
|   | uid  | uint64      | 必 | 返回用户数字编号   |
|---|------|-------------|----|--------------------|
|   | info | json_string | 必 | 以json格式的字符串 |
|   |      |             |    |                    |

| # | 出错码       | 描述       |
|---|--------------|------------|
|   | E_USER_EXIST | 帐号已存在 |
|   |              |            |



## 用户登录

### 请求

| # | 字段         | 类型        | /  | 描述                   |
|---|--------------|-------------|----|------------------------|
|   | openid       | string      | 必 | 开放id                 |
|   | openid_type_ | string      | 必 | 开放id的类型           |
|   | auto_create_ | int         | 必 | 如果创号不存在就创建    |
|---|--------------|-------------|----|------------------------|
|   | info         | json_string | 选 | 以json格式的字符串     |
|   |              |             |    |                        |

### 应答
| # | 字段 | 类型        | /  | 描述               |
|---|------|-------------|----|--------------------|
|   | uid  | uint64      | 必 | 返回用户数字编号   |
|---|------|-------------|----|--------------------|
|   | info | json_string | 必 | 以json格式的字符串 |
|   |      |             |    |                    |

| # | 出错码           | 描述       |
|---|------------------|------------|
|   | E_USER_NOT_EXIST | 帐号不存在 |
|   |                  |            |


## 创建房间
### 请求
| # | 字段      | 类型        | /  | 描述               |
|---|-----------|-------------|----|--------------------|
|   | app_code_ | uint16      | 必 |                    |
|   | token     | uint64      | 必 |                    |
|---|-----------|-------------|----|--------------------|
|   | info      | json_string | 选 | 以json格式的字符串 |
|   |           |             |    |                    |

### 应答
| # | 字段    | 类型        | /  | 描述               |
|---|---------|-------------|----|--------------------|
|   | room_id | uint32      | 必 | 房间号        |
|---|---------|-------------|----|--------------------|
|   | info    | json_string | 必 | 以json格式的字符串 |
|   |         |             |    |                    |

| # | 出错码 | 描述 |
|---|--------|------|
|   |        |      |
|   |        |      |



## 进入房间
### 请求
| # | 字段    | 类型   | /  | 描述   |
|---|---------|--------|----|--------|
|   | room_id | uint32 | 必 | 房间号 |

### 应答

| # | 字段    | 类型        | /  | 描述         |
|---|---------|-------------|----|--------------|
|   | room_id | uint32      | 必 | 房间号       |
|   | info    | json_string | 必 | 房间描述信息 |
|   |         |             |    |              |


## 获取房间列表
### 请求
| # | 字段    | 类型   | /  | 描述   |
|---|---------|--------|----|--------|
|   | room_id | uint32 | 必 | 房间号 |

### 应答

| # | 字段      | 类型  | /  | 描述   |
|---|-----------|-------|----|--------|
|   | room_list | array | 必 | 房间号 |
|   |           |       |    |        |


## 离开房间
### 请求
| # | 字段    | 类型   | /  | 描述   |
|---|---------|--------|----|--------|
|   | room_id | uint32 | 必 | 房间号 |

### 应答

| # | 字段    | 类型        | /  | 描述         |
|---|---------|-------------|----|--------------|
|   | room_id | uint32      | 必 | 房间号       |
## 离开应用程序

## 申请令牌

### 请求
| # | 字段 | 类型 | / | 描述 |
|---|------|------|---|------|
|   | N/A  | null |   | 无   |
|   |      |      |   |      |


### 应答

| # | 字段    | 类型        | /  | 描述         |
|---|---------|-------------|----|--------------|
|   | token   | uint64      | 必 | 数字令牌      |


# 通用通知
## 房间人数变化通知

## 有人进出房间的通知




